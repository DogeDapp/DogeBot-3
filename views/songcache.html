<div class="container wrapper">
	<div class="starter-template">
		<h1><img src="/img/commands.png" alt="" />Songcache</h1>
		<div class="commandssection"></div>
		<table class="datatable songcache"><thead><th>#</th><th>Title</th><th>Video ID</th></thead><tbody></tbody></table>
	</div>
</div><!-- /.container -->
<script src="https://ttv-api.s3.amazonaws.com/twitch.min.js"></script>
<script>
	isCache = true;
	async function startSongCache() {
		let channelName = getChannelName('{{=it.passedUser}}');
		let channelData = buildChannelDataString(channelName);
		let songlist = await loadSonglist(channelData,'');
		let songCache = await loadSongCache(channelData);
		if (songCache) {
			dataTableStartSize = '25';
			buildDataTable(songCache,'.datatable',dataTableStartSize);
			/*
			TODO: replace this code with socket.io
			checkForSonglistChanges(channelData,songlist,dataTableStartSize);
			*/
		} else {
			$('.songs').html("Currently no songs in the cache!");
			$('.songs').show();
		};
	};
	startSongCache();
</script>