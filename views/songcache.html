<div class="container wrapper">
	<div class="starter-template">
		<h1>Songcache</h1>
		<div class="commandssection"></div>
		<!-- <table class="datatable"><thead><th>#</th><th>Title</th><th>Video ID</th><th>Requested By</th></thead><tbody></tbody></table> -->
		<table class="datatable"><thead><th>#</th><th>Title</th><th>Video ID</th></thead><tbody></tbody></table>
	</div>
</div><!-- /.container -->
<!-- //contentData = contentData + '<tr><td>' + (key + 1) + '</td><td>' + data[key]['songTitle'] + '</td><td><a href="https://youtu.be/' + data[key]['songID'] + '" target="_blank">' + data[key]['songID'] + '</a></td><td>' + data[key]['whoRequested'] + '</td></tr>'; -->
<script src="https://ttv-api.s3.amazonaws.com/twitch.min.js"></script>
<script src="js/datatables.js"></script>
<script>
	if ('{{=it.passedUser}}' != 'undefined') {
		var passedChannel = '{{=it.passedUser}}';
		var data = 'channel=#' + passedChannel;
	} else {
		var userDetails = decodeURIComponent(readCookie("userDetails")).split(',');
		var data = 'channel=' + userDetails[2];
	};
	$.ajax({
		url: '/getsongcache',
		data: data,
		type: 'POST',
		success: function(data) {
			if (data != '') {
				var contentData = '';
				$.each(data, function(key, value) {
					contentData = contentData + '<tr><td>' + (key + 1) + '</td><td>' + data[key]['songTitle'] + '</td><td><a href="https://youtu.be/' + data[key]['songID'] + '" target="_blank">' + data[key]['songID'] + '</a></td></tr>';
				});
				$('.datatable tbody').html(contentData);
				$('.datatable').DataTable({
					"lengthMenu": [[25, 50, -1], [25, 50, "All"]]
				});
				$('.datatable').show();
			} else {
				$('.datatable tbody').hide();
				$('.commandssection').html("Currently no songs in the cache!");
			};
		}
	});
</script>